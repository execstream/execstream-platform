<!-- TODO -->
<!-- The social media icons are sticking together, fix it. -->
<!-- Chose better icons images for scial media icons -->
<!-- View Also, is not coming below read full article, god knows why not -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title><%= issue.title %></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI",
          Roboto, sans-serif;
        padding: 40px 20px;
        margin: 0;
        line-height: 1.6;
        color: #2d3748;
        min-height: 100vh;
      }

      .newsletter-container {
        max-width: 800px;
        margin: 0 auto;
        background: #ffffff;
        border-radius: 20px;
        overflow: hidden;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        border: 3px solid rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(10px);
        position: relative;
      }

      .newsletter-container::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        border-radius: 20px;
        background: linear-gradient(
          45deg,
          rgba(102, 126, 234, 0.1),
          rgba(118, 75, 162, 0.1)
        );
        pointer-events: none;
        z-index: -1;
      }

      .header {
        background: linear-gradient(135deg, #1a202c 0%, #2d3748 100%);
        padding: 50px 40px;
        text-align: center;
        color: white;
        position: relative;
        overflow: hidden;
      }

      .header::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          45deg,
          rgba(102, 126, 234, 0.1),
          rgba(118, 75, 162, 0.1)
        );
        pointer-events: none;
      }

      .header h1 {
        font-size: 36px;
        font-weight: 700;
        margin-bottom: 16px;
        letter-spacing: -0.025em;
        position: relative;
        z-index: 1;
      }

      .header .summary {
        font-size: 18px;
        font-weight: 400;
        opacity: 0.9;
        max-width: 600px;
        margin: 0 auto;
        line-height: 1.7;
        position: relative;
        z-index: 1;
      }

      .content {
        padding: 50px 40px;
      }

      .section {
        margin-bottom: 50px;
      }

      .section:last-child {
        margin-bottom: 0;
      }

      .section-title {
        font-size: 24px;
        font-weight: 600;
        color: #1a202c;
        margin-bottom: 30px;
        padding-bottom: 12px;
        border-bottom: 3px solid #667eea;
        position: relative;
        text-align: center;
      }

      .section-title::after {
        content: "";
        position: absolute;
        bottom: -3px;
        left: 50%;
        transform: translateX(-50%);
        width: 60px;
        height: 3px;
        background: #764ba2;
      }

      .article {
        display: flex;
        align-items: flex-start;
        gap: 24px;
        margin-bottom: 32px;
        padding: 28px;
        background: #f8fafc;
        border-radius: 12px;
        border: 1px solid #e2e8f0;
        transition: all 0.3s ease;
      }

      .article:hover {
        transform: translateY(-2px);
        box-shadow: 0 12px 25px -5px rgba(0, 0, 0, 0.1);
        border-color: #667eea;
      }

      .article:last-child {
        margin-bottom: 0;
      }

      .article-content {
        flex: 1;
      }

      .article-image {
        flex-shrink: 0;
        width: 180px;
        height: 120px;
        border-radius: 8px;
        overflow: hidden;
        order: 2;
      }

      .article-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.3s ease;
      }

      .article:hover .article-image img {
        transform: scale(1.05);
      }

      .article-title {
        font-size: 20px;
        font-weight: 600;
        color: #1a202c;
        margin-bottom: 12px;
        line-height: 1.4;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }

      .article-summary {
        font-size: 15px;
        color: #4a5568;
        margin-bottom: 16px;
        line-height: 1.6;
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }

      .article-links {
        display: flex;
        flex-direction: column !important;
        gap: 8px;
      }

      .read-more {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        font-size: 14px;
        font-weight: 500;
        color: #667eea;
        text-decoration: none;
        transition: all 0.2s ease;
        padding: 8px 16px;
        border-radius: 6px;
        background: rgba(102, 126, 234, 0.1);
        width: fit-content;
      }

      .read-more:hover {
        background: rgba(102, 126, 234, 0.2);
        transform: translateX(2px);
      }

      .read-more::after {
        content: "â†’";
        transition: transform 0.2s ease;
      }

      .read-more:hover::after {
        transform: translateX(2px);
      }

      .related-content {
        margin-top: 4px;
      }

      .related-label {
        font-family: "Inter", sans-serif;
        font-size: 13px;
        font-weight: 500;
        color: #718096;
        margin-right: 6px;
      }

      .related-link {
        font-family: "Inter", sans-serif;
        font-size: 13px;
        font-weight: 500;
        color: #667eea;
        text-decoration: none;
        transition: all 0.2s ease;
      }

      .related-link:hover {
        color: #764ba2;
        text-decoration: underline;
      }

      .footer {
        background: linear-gradient(135deg, #1a202c 0%, #2d3748 100%);
        color: white;
        position: relative;
        overflow: hidden;
      }

      .footer::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          45deg,
          rgba(102, 126, 234, 0.1),
          rgba(118, 75, 162, 0.1)
        );
        pointer-events: none;
      }

      .footer-content {
        position: relative;
        z-index: 1;
        padding: 40px;
        text-align: center;
      }

      .footer-message {
        font-size: 24px;
        font-weight: 600;
        margin-bottom: 12px;
        background: linear-gradient(45deg, #667eea, #764ba2);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .footer-tagline {
        font-size: 16px;
        opacity: 0.9;
        margin-bottom: 30px;
        line-height: 1.6;
      }

      .social-section {
        margin-bottom: 30px;
      }

      .social-title {
        font-size: 18px;
        font-weight: 500;
        margin-bottom: 20px;
        opacity: 0.9;
      }

      .social-icons {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 60px;
        flex-wrap: wrap;
        margin: 0 auto;
        max-width: 600px;
      }

      .social-icon {
        display: flex;
        justify-content: center;
        align-items: center;
        width: 55px;
        height: 55px;
        background: rgba(255, 255, 255, 0.15);
        border-radius: 50%;
        text-decoration: none;
        transition: all 0.3s ease;
        border: 2px solid rgba(255, 255, 255, 0.3);
        padding: 12px;
        box-sizing: border-box;
      }

      .social-icon:hover {
        transform: translateY(-3px) scale(1.1);
        background: rgba(102, 126, 234, 0.4);
        border-color: rgba(102, 126, 234, 0.7);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
      }

      .social-icon img {
        width: 28px;
        height: 28px;
        object-fit: contain;
        filter: brightness(0) invert(1);
      }

      .social-icon:hover img {
        filter: brightness(0) invert(1);
      }

      .newsletter-info {
        border-top: 1px solid rgba(255, 255, 255, 0.2);
        padding-top: 30px;
        margin-top: 30px;
      }

      .preferences-link {
        display: inline-block;
        color: #1a202c;
        text-decoration: none;
        font-size: 14px;
        font-weight: 600;
        font-style: italic;
        padding: 8px 16px;
        border-radius: 6px;
        background: #ffffff;
        margin-bottom: 20px;
        transition: all 0.2s ease;
        border: 1px solid rgba(255, 255, 255, 0.3);
      }

      .preferences-link:hover {
        background: #667eea;
        transform: translateY(-1px);
        color: #ffffff;
      }

      .copyright {
        font-size: 13px;
        opacity: 0.7;
        line-height: 1.5;
      }

      .company-name {
        font-weight: 600;
        color: #667eea;
      }

      /* Mobile Responsiveness */
      @media (max-width: 768px) {
        body {
          padding: 20px 10px;
        }

        .newsletter-container {
          border-radius: 16px;
        }

        .header {
          padding: 40px 24px;
        }

        .header h1 {
          font-size: 28px;
        }

        .header .summary {
          font-size: 16px;
        }

        .content {
          padding: 40px 24px;
        }

        .footer-content {
          padding: 40px 24px;
        }

        .section-title {
          font-size: 20px;
        }

        .article {
          flex-direction: column;
          gap: 20px;
          padding: 24px;
        }

        .article-image {
          width: 100%;
          height: 200px;
          order: 0;
        }

        .article-title {
          font-size: 18px;
        }

        .footer-message {
          font-size: 20px;
        }

        .social-icons {
          gap: 20px;
        }

        .social-icon {
          width: 45px;
          height: 45px;
        }
      }

      @media (max-width: 480px) {
        .header h1 {
          font-size: 24px;
        }

        .article {
          padding: 20px;
        }

        .section-title {
          font-size: 18px;
        }

        .article-title {
          font-size: 16px;
        }

        .article-summary {
          font-size: 14px;
        }

        .footer-message {
          font-size: 18px;
        }

        .social-icons {
          gap: 15px;
        }

        .social-icon {
          width: 40px;
          height: 40px;
        }
      }
    </style>
  </head>
  <body>
    <div class="newsletter-container">
      <div class="header">
        <h1><%= issue.title %></h1>
        <p class="summary"><%= issue.summary %></p>
      </div>

      <div class="content">
        <% const grouped = {}; issue.content_blocks.forEach(cb => { if
        (!grouped[cb.category]) grouped[cb.category] = [];
        grouped[cb.category].push(cb); }); for (let cat in grouped) { %>
        <div class="section">
          <h2 class="section-title"><%= cat %></h2>
          <% grouped[cat].forEach(block => { const content = block.content_id;
          if (!content) return; %>
          <article class="article">
            <div class="article-content">
              <h3 class="article-title"><%= content.title %></h3>
              <% if (content.ai_summary) { %>
              <p class="article-summary"><%= content.ai_summary %></p>
              <% } %>
              <div class="article-links">
                <% if (block.link) { %>
                <a class="read-more" href="<%= block.link %>" target="_blank"
                  >Read Full
                </a>
                <% } %> <% if (block.related_content_link &&
                block.related_content_title) { %>
                <div class="related-content">
                  <span class="related-label">View Also:</span>
                  <a
                    class="related-link"
                    href="<%= block.related_content_link %>"
                    target="_blank"
                    ><%= block.related_content_title %></a
                  >
                </div>
                <% } %>
              </div>
            </div>
            <% if (content.banner_image_url) { %>
            <div class="article-image">
              <img
                src="<%= content.banner_image_url %>"
                alt="<%= content.title %>"
              />
            </div>
            <% } %>
          </article>
          <% }) %>
        </div>
        <% } %>
      </div>

      <footer class="footer">
        <div class="footer-content">
          <h3 class="footer-message">Thank You for Reading!</h3>
          <p class="footer-tagline">
            We appreciate you taking the time to stay informed with our
            newsletter. Your engagement drives us to deliver quality content
            every time.
          </p>

          <div class="social-section">
            <h4 class="social-title">Stay Connected ðŸŒŸ</h4>
            <div class="social-icons">
              <a
                href="https://facebook.com"
                class="social-icon"
                title="Facebook"
              >
                <img
                  src="https://store-images.s-microsoft.com/image/apps.30645.9007199266245907.cb06f1f9-9154-408e-b4ef-d19f2325893b.ac3b465e-4384-42a8-9142-901c0405e1bc"
                  alt="Facebook"
                />
              </a>
              <a href="https://x.com" class="social-icon" title="X.com">
                <img
                  src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRgjOEnpr7EqFTi-zO4zZt6k4L2n5eDQxow4D_tQqazL7D-_9_HwlkZF6lR6afjdJUoULI&usqp=CAU"
                  alt="X.com"
                />
              </a>
              <a
                href="https://instagram.com"
                class="social-icon"
                title="Instagram"
              >
                <img
                  src="https://store-images.s-microsoft.com/image/apps.43327.13510798887167234.cadff69d-8229-427b-a7da-21dbaf80bd81.79b8f512-1b22-45d6-9495-881485e3a87e"
                  alt="Instagram"
                />
              </a>
              <a href="https://youtube.com" class="social-icon" title="YouTube">
                <img
                  src="https://cdn.iconscout.com/icon/free/png-256/free-youtube-logo-icon-download-in-svg-png-gif-file-formats--social-media-70-flat-icons-color-pack-logos-432560.png"
                  alt="YouTube"
                />
              </a>
              <a
                href="https://linkedin.com"
                class="social-icon"
                title="LinkedIn"
              >
                <img
                  src="https://store-images.s-microsoft.com/image/apps.21465.9007199266245564.5c86c318-51bf-425a-9b3d-75e1fd3198b1.cad44b54-5070-478b-a977-c5d442325b8a?h=210"
                  alt="LinkedIn"
                />
              </a>
            </div>
          </div>

          <div class="newsletter-info">
            <a href="#" class="preferences-link"> Unsubscribe </a>

            <div class="copyright">
              Â© 2024 <span class="company-name">Suit and Times</span><br />
              228 Park Ave S, #29976, New York, New York 10003, United States
            </div>
          </div>
        </div>
      </footer>
    </div>
  </body>
</html>
